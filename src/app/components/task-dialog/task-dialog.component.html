<div class="fixed inset-0 bg-black bg-opacity-40 flex items-center justify-center z-50">
    <div class="bg-white rounded-lg shadow-lg w-full max-w-md p-0">
        <div class="flex items-center justify-between px-6 py-4 border-b">
            <h3 class="text-lg font-semibold">New Task</h3>
            <button (click)="onClose()"
                    class="text-gray-500 hover:text-gray-700">
                <span class="material-icons">close</span>
            </button>
        </div>
        <form [formGroup]="formGroup"
              (ngSubmit)="onSubmit()"
              class="p-6 space-y-4">
            <div>
                <label class="block text-sm font-medium mb-1"
                       for="title">
                    Title <span class="text-red-500">*</span>
                </label>
                <input id="title"
                       type="text"
                       formControlName="title"
                       maxlength="50"
                       class="w-full border rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-400"
                       [class.border-red-500]="title.invalid && title.touched">
                <div *ngIf="title.invalid && title.touched"
                     class="text-xs text-red-500 mt-1">
                    Title is required (1-50 characters).
                </div>
            </div>
            <div>
                <label class="block text-sm font-medium mb-1"
                       for="description">
                    Short Description
                </label>
                <textarea id="description"
                          formControlName="description"
                          maxlength="100"
                          class="w-full border rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-400 min-h-[60px] resize-y"
                          [class.border-red-500]="description.invalid && description.touched">
                </textarea>
                <div class="text-xs text-gray-400 text-right">{{ description.value.length || 0 }}/100</div>
            </div>
            <div>
                <label class="block text-sm font-medium mb-1"
                       for="priority">
                    Priority <span class="text-red-500">*</span>
                </label>
                <select id="priority"
                        formControlName="priority"
                        class="w-full border rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-400"
                        [class.border-red-500]="priority.invalid && priority.touched">
                    <option value=""
                            disabled
                            selected>
                        Select priority
                    </option>
                    @for (priority of priorities; track priority)
                    {
                    <option [value]="priority">{{ priority }}</option>
                    }
                </select>
                <div *ngIf="priority.invalid && priority.touched"
                     class="text-xs text-red-500 mt-1">
                    Priority is required.
                </div>
            </div>
            <div class="flex justify-end pt-2">
                <button type="submit"
                        class="bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 transition">
                    Create Task
                </button>
            </div>
        </form>
    </div>
</div>